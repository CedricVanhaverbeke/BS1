<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>perl593delta - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Language" content="en-gb" />
  <link href="css.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen" />
  <link rel="search" type="application/opensearchdescription+xml" title="Perldoc" href="opensearch.html">
</head>

<script language="JavaScript" type="text/javascript" src="label.js"></script>

<script language="JavaScript">
  pageDepth = 0;
  setPath();
</script>

<body onLoad="showToolbars();loadLabels()">

<div id="pageHeader">
  <div id="pageHeaderLogo">
    <img src="onion.gif">
  </div>
  <div id="pageHeaderText">
    <a href="http://perldoc.perl.org">perldoc.perl.org</a>
  </div>
</div>

<div id="pageBody">
  <div id="left">
    <div id="leftContent">
      <div id="leftClose">
        <a href="#" onClick="closeLeft()" title="Hide navigation" onmouseover="leftCloseIcon.src='close_purple.gif';" onmouseout="leftCloseIcon.src='close_blue.gif';"><img src="close_blue.gif" name="leftCloseIcon" id="leftCloseIcon" border=0></a>
      </div>
      <h1>Manual:</h1>
      <ul>
        <li><a href="index-overview.html">Overview</a></li>
        <li><a href="index-tutorials.html">Tutorials</a></li>
        <li><a href="index-faq.html">FAQs</a></li>
        <li><a href="index-history.html">History / Changes</a></li>
        <li><a href="index-licence.html">Licence</a></li>
      </ul>
      <h2>Reference:</h2>
      <ul>
        <li><a href="index-language.html">Language</a></li>
        <li><a href="index-functions.html">Functions</a></li>
        <li><a href="perlop.html">Operators</a></li>
        <li><a href="perlvar.html">Special variables</a></li>
        <li><a href="index-pragmas.html">Pragmas</a></li>
        <li><a href="index-modules-A.html">Core modules</a></li>
        <li><a href="index-utilities.html">Utilities</a></li>
        <li><a href="index-internals.html">Internals</a></li>
        <li><a href="index-platforms.html">Platform specific</a></li>
      </ul>
    </div>
  </div>

  <div id="center">  
    <div id="centerContent">
      <div id="contentHeader">
        <div id="contentHeaderLeft"><a href="#" onClick="showLeft()">Show navigation</a></div>
        <div id="contentHeaderCentre">-- Perl 5.10.0 documentation --</div>
        <div id="contentHeaderRight"><a href="#" onClick="showRight()">Show toolbar</a></div>
      </div>
      <div id="breadCrumbs"><a href="index.html">Home</a> &gt; <a href="index-history.html">History / Changes</a> &gt; perl593delta</div>
      <script language="JavaScript">fromSearch();</script>
      <div id="contentBody"><div class="title_container"><div class="page_title">perl593delta</div><ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#Parsing-of-'-f-_'">Parsing of <code class="inline">-f <span class="i">_</span></code>
</a><li><a href="#'mkdir()'"><code class="inline"><a class="l_k" href="functions/mkdir.html">mkdir()</a></code></a><li><a href="#Magic-goto-and-eval">Magic goto and eval</a><li><a href="#'0x240x23'-has-been-removed"><code class="inline"><span class="i">$#</span></code>
 has been removed</a><li><a href="#'0x3aunique'"><code class="inline"><span class="j">:</span><span class="w">unique</span></code>
</a><li><a href="#Scoping-of-the-'sort'-pragma">Scoping of the <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> pragma</a></ul><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#The-'feature'-pragma">The <code class="inline"><span class="w">feature</span></code>
 pragma</a><li><a href="#Switch-and-Smart-Match-operator">Switch and Smart Match operator</a><li><a href="#'say()'"><code class="inline"><a class="l_k" href="functions/say.html">say()</a></code></a><li><a href="#'CLONE_SKIP()'"><code class="inline"><span class="i">CLONE_SKIP</span><span class="s">(</span><span class="s">)</span></code>
</a><li><a href="#'0x240x7b0x5eCHILD_ERROR_NATIVE0x7d'"><code class="inline"><span class="i">$</span>{<span class="w">^CHILD_ERROR_NATIVE</span>}</code>
</a><li><a href="#Assertions">Assertions</a><li><a href="#Unicode-Character-Database-4.1.0">Unicode Character Database 4.1.0</a><li><a href="#'no-VERSION'"><code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">VERSION</span></code>
</a><li><a href="#Recursive-sort-subs">Recursive sort subs</a><li><a href="#Effect-of-pragmas-in-eval">Effect of pragmas in eval</a><li><a href="#New-*-E*-command-line-switch">New <b>-E</b> command-line switch</a><li><a href="#'chdir'0x2c-'chmod'-and-'chown'-on-filehandles"><code class="inline"><a class="l_k" href="functions/chdir.html">chdir</a></code>, <code class="inline"><a class="l_k" href="functions/chmod.html">chmod</a></code> and <code class="inline"><a class="l_k" href="functions/chown.html">chown</a></code> on filehandles</a><li><a href="#OS-groups">OS groups</a></ul><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#New-Core-Modules">New Core Modules</a></ul><li><a href="#Utility-Changes">Utility Changes</a><ul><li><a href="#'ptar'"><code class="inline"><span class="w">ptar</span></code>
</a><li><a href="#'ptardiff'"><code class="inline"><span class="w">ptardiff</span></code>
</a><li><a href="#'shasum'"><code class="inline"><span class="w">shasum</span></code>
</a><li><a href="#'h2xs'-enhancements"><code class="inline"><span class="w">h2xs</span></code>
 enhancements</a><li><a href="#'perlivp'-enhancements"><code class="inline"><span class="w">perlivp</span></code>
 enhancements</a></ul><li><a href="#Documentation">Documentation</a><ul><li><a href="#Perl-Glossary">Perl Glossary</a></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a><ul><li><a href="#XS-assisted-SWASHGET">XS-assisted SWASHGET</a><li><a href="#Constant-subroutines">Constant subroutines</a><li><a href="#'PERL_DONT_CREATE_GVSV'"><code class="inline"><span class="w">PERL_DONT_CREATE_GVSV</span></code>
</a><li><a href="#Weak-references-are-cheaper">Weak references are cheaper</a><li><a href="#sort()-enhancements">sort() enhancements</a></ul><li><a href="#Installation-and-Configuration-Improvements">Installation and Configuration Improvements</a><ul><li><a href="#Compilation-improvements">Compilation improvements</a><li><a href="#New-Or-Improved-Platforms">New Or Improved Platforms</a><li><a href="#New-probes">New probes</a><li><a href="#Module-auxiliary-files">Module auxiliary files</a></ul><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><ul><li><a href="#'defined-0x240x24x'"><code class="inline"><a class="l_k" href="functions/defined.html">defined</a> <span class="i">$$x</span></code>
</a><li><a href="#Calling-CORE0x3a0x3arequire()">Calling CORE::require()</a><li><a href="#Subscripts-of-slices">Subscripts of slices</a><li><a href="#Remove-over-optimisation">Remove over-optimisation</a><li><a href="#sprintf()-fixes">sprintf() fixes</a><li><a href="#no-warnings-'category'-works-correctly-with--w">no warnings 'category' works correctly with -w</a><li><a href="#Smaller-fixes">Smaller fixes</a><li><a href="#More-Unicode-Fixes">More Unicode Fixes</a></ul><li><a href="#New-or-Changed-Diagnostics">New or Changed Diagnostics</a><ul><li><a href="#Attempt-to-set-length-of-freed-array">Attempt to set length of freed array</a><li><a href="#Non-string-passed-as-bitmask">Non-string passed as bitmask</a><li><a href="#Search-pattern-not-terminated-or-ternary-operator-parsed-as-search-pattern">Search pattern not terminated or ternary operator parsed as search pattern</a><li><a href="#0x220x25s0x22-variable-0x25s-masks-earlier-declaration">"%s" variable %s masks earlier declaration</a><li><a href="#readdir()0x2fclosedir()0x2fetc.-attempted-on-invalid-dirhandle">readdir()/closedir()/etc. attempted on invalid dirhandle</a></ul><li><a href="#Changed-Internals">Changed Internals</a><ul><li><a href="#B0x3a0x3a-modules-inheritance-changed">B:: modules inheritance changed</a></ul><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perl593delta - what is new for perl v5.9.3</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>This document describes differences between the 5.9.2 and the 5.9.3
development releases. See <a href="perl590delta.html">perl590delta</a>, <a href="perl591delta.html">perl591delta</a> and
<a href="perl592delta.html">perl592delta</a> for the differences between 5.8.0 and 5.9.2.</p>
<a name="Incompatible-Changes"></a><h1>Incompatible Changes</h1>
<a name="Parsing-of-'-f-_'"></a><h2>Parsing of <code class="inline">-f <span class="i">_</span></code>
</h2>
<p>The identifier <code class="inline"><span class="w">_</span></code>
 is now forced to be a bareword after a filetest
operator. This solves a number of misparsing issues when a global <code class="inline"><span class="w">_</span></code>

subroutine is defined.</p>
<a name="'mkdir()'"></a><h2><code class="inline"><a class="l_k" href="functions/mkdir.html">mkdir()</a></code></h2>
<p><code class="inline"><a class="l_k" href="functions/mkdir.html">mkdir()</a></code> without arguments now defaults to <code class="inline"><span class="i">$_</span></code>
.</p>
<a name="Magic-goto-and-eval"></a><h2>Magic goto and eval</h2>
<p>The construct <code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="s">{</span> <a class="l_k" href="functions/goto.html">goto</a> <span class="i">&amp;foo</span> <span class="s">}</span></code>
 is now disallowed. (Note that the
similar construct, but with <code class="inline"><a class="l_k" href="functions/eval.html">eval("")</a></code> instead, was already forbidden.)</p>
<a name="'0x240x23'-has-been-removed"></a><h2><code class="inline"><span class="i">$#</span></code>
 has been removed</h2>
<p>The deprecated <code class="inline"><span class="i">$#</span></code>
 variable (output format for numbers) has been
removed. A new warning, <code class="inline">$# is no longer supported</code>, has been added.</p>
<a name="'0x3aunique'"></a><h2><code class="inline"><span class="j">:</span><span class="w">unique</span></code>
</h2>
<p>The <code class="inline"><span class="j">:</span><span class="w">unique</span></code>
 attribute has been made a no-op, since its current
implementation was fundamentally flawed and not threadsafe.</p>
<a name="Scoping-of-the-'sort'-pragma"></a><h2>Scoping of the <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> pragma</h2>
<p>The <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> pragma is now lexically scoped. Its effect used to be global.</p>
<a name="Core-Enhancements"></a><h1>Core Enhancements</h1>
<a name="The-'feature'-pragma"></a><h2>The <code class="inline"><span class="w">feature</span></code>
 pragma</h2>
<p>The <code class="inline"><span class="w">feature</span></code>
 pragma is used to enable new syntax that would break Perl's
backwards-compatibility with older releases of the language. It's a lexical
pragma, like <code class="inline"><span class="w">strict</span></code>
 or <code class="inline"><span class="w">warnings</span></code>
.</p>
<p>Currently the following new features are available: <code class="inline">switch</code>
 (adds a
switch statement), <code class="inline">~~</code>
 (adds a Perl 6-like smart match operator), <code class="inline"><a class="l_k" href="functions/say.html">say</a></code>
(adds a <code class="inline"><a class="l_k" href="functions/say.html">say</a></code> built-in function), and <code class="inline">err</code>
 (adds an <code class="inline">err</code>
 keyword).
Those features are described below.</p>
<p>Note that <code class="inline">err</code>
 low-precedence defined-or operator used to be enabled by
default (although as a weak keyword, meaning that any function would
override it). It's now only recognized when explicitly turned on (and is
then a regular keyword).</p>
<p>Those features, and the <code class="inline"><span class="w">feature</span></code>
 pragma itself, have been contributed by
Robin Houston.</p>
<a name="Switch-and-Smart-Match-operator"></a><h2>Switch and Smart Match operator</h2>
<p>Perl 5 now has a switch statement. It's available when <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span>
<span class="q">'switch'</span></code>
 is in effect. This feature introduces three new keywords,
<code class="inline">given</code>
, <code class="inline">when</code>
, and <code class="inline"><span class="w">default</span></code>
:</p>
<pre class="verbatim">    given <span class="s">(</span><span class="i">$foo</span><span class="s">)</span> <span class="s">{</span>
	when <span class="s">(</span><span class="q">/^abc/</span><span class="s">)</span> <span class="s">{</span> <span class="i">$abc</span> = <span class="n">1</span><span class="sc">;</span> <span class="s">}</span>
	when <span class="s">(</span><span class="q">/^def/</span><span class="s">)</span> <span class="s">{</span> <span class="i">$def</span> = <span class="n">1</span><span class="sc">;</span> <span class="s">}</span>
	when <span class="s">(</span><span class="q">/^xyz/</span><span class="s">)</span> <span class="s">{</span> <span class="i">$xyz</span> = <span class="n">1</span><span class="sc">;</span> <span class="s">}</span>
	<span class="i">default</span> <span class="s">{</span> <span class="i">$nothing</span> = <span class="n">1</span><span class="sc">;</span> <span class="s">}</span>
    <span class="s">}</span></pre>
<p>A more complete description of how Perl matches the switch variable
against the <code class="inline">when</code>
 conditions is given in <a href="perlsyn.html#Switch-statements">"Switch statements" in perlsyn</a>.</p>
<p>This kind of match is called <i>smart match</i>, and it's also possible to use
it outside of switch statements, via the new <code class="inline">~~</code>
 operator (enabled via
the <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">'~~'</span></code>
 directive). See <a href="perlsyn.html#Smart-matching-in-detail">"Smart matching in detail" in perlsyn</a>.</p>
<a name="'say()'"></a><h2><code class="inline"><a class="l_k" href="functions/say.html">say()</a></code></h2>
<p>say() is a new built-in, only available when <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">'say'</span></code>
 is in
effect, that is similar to print(), but that implicitly appends a newline
to the printed string. See <a href="functions/say.html">say</a>.</p>
<a name="'CLONE_SKIP()'"></a><h2><code class="inline"><span class="i">CLONE_SKIP</span><span class="s">(</span><span class="s">)</span></code>
</h2>
<p>Perl has now support for the <code class="inline"><span class="w">CLONE_SKIP</span></code>
 special subroutine. Like
<code class="inline"><span class="w">CLONE</span></code>
, <code class="inline"><span class="w">CLONE_SKIP</span></code>
 is called once per package; however, it is called
just before cloning starts, and in the context of the parent thread. If it
returns a true value, then no objects of that class will be cloned. See
<a href="perlmod.html">perlmod</a> for details. (Contributed by Dave Mitchell.)</p>
<a name="'0x240x7b0x5eCHILD_ERROR_NATIVE0x7d'"></a><h2><code class="inline"><span class="i">$</span>{<span class="w">^CHILD_ERROR_NATIVE</span>}</code>
</h2>
<p>A new internal variable, <code class="inline"><span class="i">$</span>{<span class="w">^CHILD_ERROR_NATIVE</span>}</code>
, gives the native
status returned by the last pipe close, backtick command, successful call
to wait() or waitpid(), or from the system() operator. See <a href="perlrun.html">perlrun</a> for
details. (Contributed by Gisle Aas.)</p>
<a name="Assertions"></a><h2>Assertions</h2>
<p>The support for assertions, introduced in perl 5.9.0, has been improved.
The syntax for the <code class="inline">-A</code>
 command-line switch has changed; it now accepts
an optional module name, defaulting to <code class="inline"><span class="w">assertions::activate</span></code>
. See
<a href="http://search.cpan.org/perldoc/assertions">assertions</a> and <a href="perlrun.html">perlrun</a>. (Contributed by Salvador Fandiño García.)</p>
<a name="Unicode-Character-Database-4.1.0"></a><h2>Unicode Character Database 4.1.0</h2>
<p>The copy of the Unicode Character Database included in Perl 5.9 has
been updated to 4.1.0.</p>
<a name="'no-VERSION'"></a><h2><code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">VERSION</span></code>
</h2>
<p>You can now use <code class="inline"><a class="l_k" href="functions/no.html">no</a></code> followed by a version number to specify that you
want to use a version of perl older than the specified one.</p>
<a name="Recursive-sort-subs"></a><h2>Recursive sort subs</h2>
<p>You can now use recursive subroutines with sort(), thanks to Robin Houston.</p>
<a name="Effect-of-pragmas-in-eval"></a><h2>Effect of pragmas in eval</h2>
<p>The compile-time value of the <code class="inline"><span class="i">%^H</span></code>
 hint variable can now propagate into
eval("")uated code. This makes it more useful to implement lexical
pragmas.</p>
<p>As a side-effect of this, the overloaded-ness of constants now propagates
into eval("").</p>
<a name="New-*-E*-command-line-switch"></a><h2>New <b>-E</b> command-line switch</h2>
<p><b>-E</b> is equivalent to <b>-e</b>, but it implicitly enables all
optional features (like <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&quot;:5.10&quot;</span></code>
).</p>
<a name="'chdir'0x2c-'chmod'-and-'chown'-on-filehandles"></a><h2><code class="inline"><a class="l_k" href="functions/chdir.html">chdir</a></code>, <code class="inline"><a class="l_k" href="functions/chmod.html">chmod</a></code> and <code class="inline"><a class="l_k" href="functions/chown.html">chown</a></code> on filehandles</h2>
<p><code class="inline"><a class="l_k" href="functions/chdir.html">chdir</a></code>, <code class="inline"><a class="l_k" href="functions/chmod.html">chmod</a></code> and <code class="inline"><a class="l_k" href="functions/chown.html">chown</a></code> can now work on filehandles as well as
filenames, if the system supports respectively <code class="inline"><span class="w">fchdir</span></code>
, <code class="inline"><span class="w">fchmod</span></code>
 and
<code class="inline"><span class="w">fchown</span></code>
, thanks to a patch provided by Gisle Aas.</p>
<a name="OS-groups"></a><h2>OS groups</h2>
<p><code class="inline"><span class="i">$(</span></code>
 and <code class="inline"><span class="i">$)</span></code>
 now return groups in the order where the OS returns them,
thanks to Gisle Aas. This wasn't previously the case.</p>
<a name="Modules-and-Pragmata"></a><h1>Modules and Pragmata</h1>
<a name="New-Core-Modules"></a><h2>New Core Modules</h2>
<ul>
<li>
<p>A new pragma, <code class="inline"><span class="w">feature</span></code>
, has been added; see above in <a href="#Core-Enhancements">"Core Enhancements"</a>.</p>
</li>
<li>
<p><code class="inline"><span class="w">assertions::compat</span></code>
, also available on CPAN, allows the use of assertions on
perl versions prior to 5.9.0 (that is the first one to natively support
them).</p>
</li>
<li>
<p><code class="inline"><span class="w">Math::BigInt::FastCalc</span></code>
 is an XS-enabled, and thus faster, version of
<code class="inline"><span class="w">Math::BigInt::Calc</span></code>
.</p>
</li>
<li>
<p><code class="inline"><span class="w">Compress::Zlib</span></code>
 is an interface to the zlib compression library. It
comes with a bundled version of zlib, so having a working zlib is not a
prerequisite to install it. It's used by <code class="inline"><span class="w">Archive::Tar</span></code>
 (see below).</p>
</li>
<li>
<p><code class="inline"><span class="w">IO::Zlib</span></code>
 is an <code class="inline"><span class="w">IO::</span></code>
-style interface to <code class="inline"><span class="w">Compress::Zlib</span></code>
.</p>
</li>
<li>
<p><code class="inline"><span class="w">Archive::Tar</span></code>
 is a module to manipulate <code class="inline"><span class="w">tar</span></code>
 archives.</p>
</li>
<li>
<p><code class="inline"><span class="w">Digest::SHA</span></code>
 is a module used to calculate many types of SHA digests,
has been included for SHA support in the CPAN module.</p>
</li>
<li>
<p><code class="inline"><span class="w">ExtUtils::CBuilder</span></code>
 and <code class="inline"><span class="w">ExtUtils::ParseXS</span></code>
 have been added.</p>
</li>
</ul>
<a name="Utility-Changes"></a><h1>Utility Changes</h1>
<a name="'ptar'"></a><h2><code class="inline"><span class="w">ptar</span></code>
</h2>
<p><code class="inline"><span class="w">ptar</span></code>
 is a pure perl implementation of <code class="inline"><span class="w">tar</span></code>
, that comes with
<code class="inline"><span class="w">Archive::Tar</span></code>
.</p>
<a name="'ptardiff'"></a><h2><code class="inline"><span class="w">ptardiff</span></code>
</h2>
<p><code class="inline"><span class="w">ptardiff</span></code>
 is a small script used to generate a diff between the contents
of a tar archive and a directory tree. Like <code class="inline"><span class="w">ptar</span></code>
, it comes with
<code class="inline"><span class="w">Archive::Tar</span></code>
.</p>
<a name="'shasum'"></a><h2><code class="inline"><span class="w">shasum</span></code>
</h2>
<p>This command-line utility, used to print or to check SHA digests, comes
with the new <code class="inline"><span class="w">Digest::SHA</span></code>
 module.</p>
<a name="'h2xs'-enhancements"></a><h2><code class="inline"><span class="w">h2xs</span></code>
 enhancements</h2>
<p><code class="inline"><span class="w">h2xs</span></code>
 implements a new option <code class="inline">--<a class="l_k" href="functions/use.html">use</a>-<span class="w">xsloader</span></code>
 to force use of
<code class="inline"><span class="w">XSLoader</span></code>
 even in backwards compatible modules.</p>
<p>The handling of authors' names that had apostrophes has been fixed.</p>
<p>Any enums with negative values are now skipped.</p>
<a name="'perlivp'-enhancements"></a><h2><code class="inline"><span class="w">perlivp</span></code>
 enhancements</h2>
<p><code class="inline"><span class="w">perlivp</span></code>
 no longer checks for <i>*.ph</i> files by default.  Use the new <code class="inline">-<span class="w">a</span></code>

option to run <i>all</i> tests.</p>
<a name="Documentation"></a><h1>Documentation</h1>
<a name="Perl-Glossary"></a><h2>Perl Glossary</h2>
<p>The <a href="perlglossary.html">perlglossary</a> manpage is a glossary of terms used in the Perl
documentation, technical and otherwise, kindly provided by O'Reilly Media,
Inc.</p>
<p><a href="perltodo.html">perltodo</a> now lists a rough roadmap to Perl 5.10.</p>
<a name="Performance-Enhancements"></a><h1>Performance Enhancements</h1>
<a name="XS-assisted-SWASHGET"></a><h2>XS-assisted SWASHGET</h2>
<p>Some pure-perl code that perl was using to retrieve Unicode properties and
transliteration mappings has been reimplemented in XS.</p>
<a name="Constant-subroutines"></a><h2>Constant subroutines</h2>
<p>The interpreter internals now support a far more memory efficient form of
inlineable constants. Storing a reference to a constant value in a symbol
table is equivalent to a full typeglob referencing a constant subroutine,
but using about 400 bytes less memory. This proxy constant subroutine is
automatically upgraded to a real typeglob with subroutine if necessary.
The approach taken is analogous to the existing space optimisation for
subroutine stub declarations, which are stored as plain scalars in place
of the full typeglob.</p>
<p>Several of the core modules have been converted to use this feature for
their system dependent constants - as a result <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">POSIX</span><span class="sc">;</span></code>
 now takes about
200K less memory.</p>
<a name="'PERL_DONT_CREATE_GVSV'"></a><h2><code class="inline"><span class="w">PERL_DONT_CREATE_GVSV</span></code>
</h2>
<p>The new compilation flag <code class="inline"><span class="w">PERL_DONT_CREATE_GVSV</span></code>
, introduced as an option
in perl 5.8.8, is turned on by default in perl 5.9.3. It prevents perl
from creating an empty scalar with every new typeglob. See <a href="perl588delta.html">perl588delta</a>
for details.</p>
<a name="Weak-references-are-cheaper"></a><h2>Weak references are cheaper</h2>
<p>Weak reference creation is now <i>O(1)</i> rather than <i>O(n)</i>, courtesy of
Nicholas Clark. Weak reference deletion remains <i>O(n)</i>, but if deletion only
happens at program exit, it may be skipped completely.</p>
<a name="sort()-enhancements"></a><h2>sort() enhancements</h2>
<p>Salvador Fandiño provided improvements to reduce the memory usage of <code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code>
and to speed up some cases.</p>
<a name="Installation-and-Configuration-Improvements"></a><h1>Installation and Configuration Improvements</h1>
<a name="Compilation-improvements"></a><h2>Compilation improvements</h2>
<p>Parallel makes should work properly now, although there may still be problems
if <code class="inline"><span class="w">make</span> <span class="w">test</span></code>
 is instructed to run in parallel.</p>
<p>Building with Borland's compilers on Win32 should work more smoothly. In
particular Steve Hay has worked to side step many warnings emitted by their
compilers and at least one C compiler internal error.</p>
<p>Perl extensions on Windows now can be statically built into the Perl DLL,
thanks to a work by Vadim Konovalov.</p>
<a name="New-Or-Improved-Platforms"></a><h2>New Or Improved Platforms</h2>
<p>Perl is being ported to Symbian OS. See <a href="perlsymbian.html">perlsymbian</a> for more
information.</p>
<p>The VMS port has been improved. See <a href="perlvms.html">perlvms</a>.</p>
<p>DynaLoader::dl_unload_file() now works on Windows.</p>
<p>Portability of Perl on various recent compilers on Windows has been
improved (Borland C++, Visual C++ 7.0).</p>
<a name="New-probes"></a><h2>New probes</h2>
<p><code class="inline"><span class="w">Configure</span></code>
 will now detect <code class="inline"><span class="w">clearenv</span></code>
 and <code class="inline"><span class="w">unsetenv</span></code>
, thanks to a
patch from Alan Burlison. It will also probe for <code class="inline"><span class="w">futimes</span></code>
 (and use it
internally if available), and whether <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a></code> correctly returns the
length of the formatted string.</p>
<a name="Module-auxiliary-files"></a><h2>Module auxiliary files</h2>
<p>README files and changelogs for CPAN modules bundled with perl are no
longer installed.</p>
<a name="Selected-Bug-Fixes"></a><h1>Selected Bug Fixes</h1>
<a name="'defined-0x240x24x'"></a><h2><code class="inline"><a class="l_k" href="functions/defined.html">defined</a> <span class="i">$$x</span></code>
</h2>
<p><code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span> <span class="q">&quot;refs&quot;</span></code>
 was ignoring taking a hard reference in an argument
to defined(), as in :</p>
<pre class="verbatim">    <a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span> <span class="q">&quot;refs&quot;</span><span class="sc">;</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span> = <span class="q">&quot;foo&quot;</span><span class="sc">;</span>
    if <span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a> <span class="i">$$x</span><span class="s">)</span> <span class="s">{</span>...<span class="s">}</span></pre>
<p>This now correctly produces the run-time error <code class="inline">Can't use string as a
SCALAR ref while "strict refs" in use</code>. (However, <code class="inline"><a class="l_k" href="functions/defined.html">defined</a> <span class="i">@$foo</span></code>
 and
<code class="inline"><a class="l_k" href="functions/defined.html">defined</a> <span class="i">%$foo</span></code>
 are still allowed. Those constructs are discouraged
anyway.)</p>
<a name="Calling-CORE0x3a0x3arequire()"></a><h2>Calling CORE::require()</h2>
<p>CORE::require() and CORE::do() were always parsed as require() and do()
when they were overridden. This is now fixed.</p>
<a name="Subscripts-of-slices"></a><h2>Subscripts of slices</h2>
<p>You can now use a non-arrowed form for chained subscripts after a list
slice, like in:</p>
<pre class="verbatim">    <span class="s">(</span><span class="s">{</span><span class="w">foo</span> <span class="cm">=&gt;</span> <span class="q">&quot;bar&quot;</span><span class="s">}</span><span class="s">)</span>[<span class="n">0</span>]{<span class="w">foo</span>}</pre>
<p>This used to be a syntax error; a <code class="inline">-&gt;</code>
 was required.</p>
<a name="Remove-over-optimisation"></a><h2>Remove over-optimisation</h2>
<p>Perl 5.9.2 introduced a change so that assignments of <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> to a
scalar, or of an empty list to an array or a hash, were optimised out. As
this could cause problems when <code class="inline"><a class="l_k" href="functions/goto.html">goto</a></code> jumps were involved, this change
was backed out.</p>
<a name="sprintf()-fixes"></a><h2>sprintf() fixes</h2>
<p>Using the sprintf() function with some formats could lead to a buffer
overflow in some specific cases. This has been fixed, along with several
other bugs, notably in bounds checking.</p>
<p>In related fixes, it was possible for badly written code that did not follow
the documentation of <code class="inline"><span class="w">Sys::Syslog</span></code>
 to have formatting vulnerabilities.
<code class="inline"><span class="w">Sys::Syslog</span></code>
 has been changed to protect people from poor quality third
party code.</p>
<a name="no-warnings-'category'-works-correctly-with--w"></a><h2>no warnings 'category' works correctly with -w</h2>
<p>Previously when running with warnings enabled globally via <code class="inline">-w</code>
, selective
disabling of specific warning categories would actually turn off all warnings.
This is now fixed; now <code class="inline"><a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span> <span class="q">&#39;io&#39;</span><span class="sc">;</span></code>
 will only turn off warnings in the
<code class="inline"><span class="w">io</span></code>
 class. Previously it would erroneously turn off all warnings.</p>
<a name="Smaller-fixes"></a><h2>Smaller fixes</h2>
<ul>
<li>
<p><code class="inline"><span class="w">FindBin</span></code>
 now works better with directories where access rights are more
restrictive than usual.</p>
</li>
<li>
<p>Several memory leaks in ithreads were closed. Also, ithreads were made
less memory-intensive.</p>
</li>
<li>
<p>Trailing spaces are now trimmed from <code class="inline"><span class="i">$!</span></code>
 and <code class="inline"><span class="i">$^E</span></code>
.</p>
</li>
<li>
<p>Operations that require perl to read a process' list of groups, such as reads
of <code class="inline"><span class="i">$(</span></code>
 and <code class="inline"><span class="i">$)</span></code>
, now dynamically allocate memory rather than using a
fixed sized array. The fixed size array could cause C stack exhaustion on
systems configured to use large numbers of groups.</p>
</li>
<li>
<p><code class="inline"><span class="w">PerlIO::scalar</span></code>
 now works better with non-default <code class="inline"><span class="i">$/</span></code>
 settings.</p>
</li>
<li>
<p>The <code class="inline"><span class="w">x</span></code>
 repetition operator is now able to operate on <code class="inline"><a class="l_k" href="functions/qw.html">qw//</a></code> lists. This
used to raise a syntax error.</p>
</li>
<li>
<p>The debugger now traces correctly execution in eval("")uated code that
contains #line directives.</p>
</li>
<li>
<p>The value of the <code class="inline"><a class="l_k" href="functions/open.html">open</a></code> pragma is no longer ignored for three-argument
opens.</p>
</li>
<li>
<p>Perl will now use the C library calls <code class="inline"><span class="w">unsetenv</span></code>
 and <code class="inline"><span class="w">clearenv</span></code>
 if present
to delete keys from <code class="inline"><span class="i">%ENV</span></code>
 and delete <code class="inline"><span class="i">%ENV</span></code>
 entirely, thanks to a patch
from Alan Burlison.</p>
</li>
</ul>
<a name="More-Unicode-Fixes"></a><h2>More Unicode Fixes</h2>
<ul>
<li>
<p>chr() on a negative value now gives <code class="inline">\<span class="i">x</span><span class="s">{</span><span class="w">FFFD</span><span class="s">}</span></code>
, the Unicode replacement
character, unless when the <code class="inline"><span class="w">bytes</span></code>
 pragma is in effect, where the low
eight bytes of the value are used.</p>
</li>
<li>
<p>Some case insensitive matches between UTF-8 encoded data and 8 bit regexps,
and vice versa, could give malformed character warnings. These have been
fixed by Dave Mitchell and Yves Orton.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/lcfirst.html">lcfirst</a></code> and <code class="inline"><a class="l_k" href="functions/ucfirst.html">ucfirst</a></code> could corrupt the string for certain cases where
the length UTF-8 encoding of the string in lower case, upper case or title
case differed. This was fixed by Nicholas Clark.</p>
</li>
</ul>
<a name="New-or-Changed-Diagnostics"></a><h1>New or Changed Diagnostics</h1>
<a name="Attempt-to-set-length-of-freed-array"></a><h2>Attempt to set length of freed array</h2>
<p>This is a new warning, produced in situations like the following one:</p>
<pre class="verbatim">    <span class="i">$r</span> = <a class="l_k" href="functions/do.html">do</a> <span class="s">{</span><a class="l_k" href="functions/my.html">my</a> <span class="i">@a</span><span class="sc">;</span> \<span class="i">$#a</span><span class="s">}</span><span class="sc">;</span>
    <span class="i">$$r</span> = <span class="n">503</span><span class="sc">;</span></pre>
<a name="Non-string-passed-as-bitmask"></a><h2>Non-string passed as bitmask</h2>
<p>This is a new warning, produced when number has been passed as a argument to
select(), instead of a bitmask.</p>
<pre class="verbatim">    <span class="c"># Wrong, will now warn</span>
    <span class="i">$rin</span> = <a class="l_k" href="functions/fileno.html">fileno</a><span class="s">(</span><span class="w">STDIN</span><span class="s">)</span><span class="sc">;</span>
    <span class="s">(</span><span class="i">$nfound</span><span class="cm">,</span><span class="i">$timeleft</span><span class="s">)</span> = <a class="l_k" href="functions/select.html">select</a><span class="s">(</span><span class="i">$rout</span>=<span class="i">$rin</span><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span> <span class="i">$timeout</span><span class="s">)</span><span class="sc">;</span></pre>
<pre class="verbatim">    <span class="c"># Should be</span>
    <span class="i">$rin</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span>
    <a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$rin</span><span class="cm">,</span><a class="l_k" href="functions/fileno.html">fileno</a><span class="s">(</span><span class="w">STDIN</span><span class="s">)</span><span class="cm">,</span><span class="n">1</span><span class="s">)</span> = <span class="n">1</span><span class="sc">;</span>
    <span class="s">(</span><span class="i">$nfound</span><span class="cm">,</span><span class="i">$timeleft</span><span class="s">)</span> = <a class="l_k" href="functions/select.html">select</a><span class="s">(</span><span class="i">$rout</span>=<span class="i">$rin</span><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span> <span class="i">$timeout</span><span class="s">)</span><span class="sc">;</span></pre>
<a name="Search-pattern-not-terminated-or-ternary-operator-parsed-as-search-pattern"></a><h2>Search pattern not terminated or ternary operator parsed as search pattern</h2>
<p>This syntax error indicates that the lexer couldn't find the final
delimiter of a <code class="inline"><span class="q">?PATTERN?</span></code>
 construct. Mentioning the ternary operator in
this error message makes syntax diagnostic easier.</p>
<a name="0x220x25s0x22-variable-0x25s-masks-earlier-declaration"></a><h2>"%s" variable %s masks earlier declaration</h2>
<p>This warning is now emitted in more consistent cases; in short, when one
of the declarations involved is a <code class="inline"><a class="l_k" href="functions/my.html">my</a></code> variable:</p>
<pre class="verbatim">    <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span><span class="sc">;</span>   <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span><span class="sc">;</span>	<span class="c"># warns</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span><span class="sc">;</span>  <a class="l_k" href="functions/our.html">our</a> <span class="i">$x</span><span class="sc">;</span>	<span class="c"># warns</span>
    <a class="l_k" href="functions/our.html">our</a> <span class="i">$x</span><span class="sc">;</span>  <a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span><span class="sc">;</span>	<span class="c"># warns</span></pre>
<p>On the other hand, the following:</p>
<pre class="verbatim">    <a class="l_k" href="functions/our.html">our</a> <span class="i">$x</span><span class="sc">;</span> <a class="l_k" href="functions/our.html">our</a> <span class="i">$x</span><span class="sc">;</span></pre>
<p>now gives a <code class="inline">"our" variable %s redeclared</code> warning.</p>
<a name="readdir()0x2fclosedir()0x2fetc.-attempted-on-invalid-dirhandle"></a><h2>readdir()/closedir()/etc. attempted on invalid dirhandle</h2>
<p>These new warnings are now emitted when a dirhandle is used but is
either closed or not really a dirhandle.</p>
<a name="Changed-Internals"></a><h1>Changed Internals</h1>
<p>In general, the source code of perl has been refactored, tied up, and
optimized in many places. Also, memory management and allocation has been
improved in a couple of points.</p>
<p>Andy Lester supplied many improvements to determine which function
parameters and local variables could actually be declared <code class="inline"><span class="w">const</span></code>
 to the C
compiler. Steve Peters provided new <code class="inline"><span class="i">*_set</span></code>
 macros and reworked the core to
use these rather than assigning to macros in LVALUE context.</p>
<p>Dave Mitchell improved the lexer debugging output under <code class="inline">-<span class="w">DT</span></code>
.</p>
<p>A new file, <i>mathoms.c</i>, has been added. It contains functions that are
no longer used in the perl core, but that remain available for binary or
source compatibility reasons. However, those functions will not be
compiled in if you add <code class="inline">-<span class="w">DNO_MATHOMS</span></code>
 in the compiler flags.</p>
<p>The <code class="inline"><span class="w">AvFLAGS</span></code>
 macro has been removed.</p>
<p>The <code class="inline"><span class="w">av_</span>*<span class="s">(</span><span class="s">)</span></code>
 functions, used to manipulate arrays, no longer accept null
<code class="inline"><span class="w">AV</span>*</code>
 parameters.</p>
<a name="B0x3a0x3a-modules-inheritance-changed"></a><h2>B:: modules inheritance changed</h2>
<p>The inheritance hierarchy of <code class="inline"><span class="w">B::</span></code>
 modules has changed; <code class="inline"><span class="w">B::NV</span></code>
 now
inherits from <code class="inline"><span class="w">B::SV</span></code>
 (it used to inherit from <code class="inline"><span class="w">B::IV</span></code>
).</p>
<a name="Reporting-Bugs"></a><h1>Reporting Bugs</h1>
<p>If you find what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the perl
bug database at <a href="http://bugs.perl.org/">http://bugs.perl.org/</a> .  There may also be
information at <a href="http://www.perl.org/">http://www.perl.org/</a> , the Perl Home Page.</p>
<p>If you believe you have an unreported bug, please run the <b>perlbug</b>
program included with your release.  Be sure to trim your bug down
to a tiny but sufficient test case.  Your bug report, along with the
output of <code class="inline"><span class="w">perl</span> -<span class="w">V</span></code>
, will be sent off to perlbug@perl.org to be
analysed by the Perl porting team.</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p>The <i>Changes</i> file for exhaustive details on what changed.</p>
<p>The <i>INSTALL</i> file for how to build Perl.</p>
<p>The <i>README</i> file for general stuff.</p>
<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>
</div>
      <div id="contentFooter"><a href="http://www.perl.org"><img src="perlpowered.png" border=0></a></div>
    </div>
  </div>

  <div id="right">
    <div id="rightContent">
      <div id="leftClose">
        <a href="#" onClick="closeRight()" title="Hide toolbar" onmouseover="rightCloseIcon.src='close_purple.gif';" onmouseout="rightCloseIcon.src='close_blue.gif';"><img src="close_blue.gif" name="rightCloseIcon" id="rightCloseIcon" border=0></a>
      </div>
      <h1>Search:</h1>
      <p>
        <form action="search.html" name="perldoc_search">
	  <input type="text" name="q" size="10" class="grey"><br>
	  <!--<select name="r"><option value="1" selected>Go to top result<option value="0">Show results list</select>-->
	</form>
      </p>
      <script language="JavaScript" type="text/javascript" src="/perl-version.js"></script>
      <h2>Labels:</h2>
      <p>
        <a href="#" onClick="addLabel('perl593delta','perl593delta.html')">Add this page</a>
      </p>
      <div class="labels" id="labels">
      </div>
    </div>
  </div>

</div>


</body>
</html>
